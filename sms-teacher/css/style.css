@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap');

:root {
    --sidebar-width: 250px;
    --sidebar-collapsed-width: 0px; /* Hidden by default on mobile, or fully collapsed */
    --header-height: 64px;
    --transition-speed: 0.3s;
    
    /* Colors */
    --color-nskblue: #1e40af;
    --color-nsklightblue: #3b82f6;
    --color-nsknavy: #1e3a8a;
    --color-nskgold: #f59e0b;
    --color-nsklight: #f0f9ff;
    --color-nskgreen: #10b981;
    --color-nskred: #ef4444;
}

body {
    font-family: 'Montserrat', sans-serif;
    background: #f8fafc;
    margin: 0;
    overflow-x: hidden;
}

/* --- Sidebar --- */
.sidebar {
    position: fixed;
    top: 0;
    left: 0;
    height: 100vh;
    width: var(--sidebar-width);
    background-color: var(--color-nsknavy);
    color: white;
    z-index: 2000; /* High z-index */
    transition: transform var(--transition-speed) ease, width var(--transition-speed) ease;
    overflow-y: auto;
    pointer-events: auto; /* Ensure clicks are registered */
}

/* Desktop: Collapsed state */
@media (min-width: 769px) {
    .sidebar.collapsed {
        width: 80px;
    }
    
    .sidebar.collapsed .sidebar-text,
    .sidebar.collapsed .logo-text {
        display: none;
    }
    
    .sidebar.collapsed .logo-container {
        margin: 0 auto;
    }
    
    .sidebar.collapsed .nav-link {
        justify-content: center;
        padding-left: 0;
        padding-right: 0;
    }
    
    .sidebar.collapsed .nav-link i {
        margin-right: 0;
    }
}

/* Mobile: Hidden by default */
@media (max-width: 768px) {
    .sidebar {
        transform: translateX(-100%);
        width: var(--sidebar-width);
    }
    
    .sidebar.mobile-show {
        transform: translateX(0);
    }
}

.sidebar-link.active {
    background-color: var(--color-nskblue) !important;
}

/* --- Main Content --- */
.main-content {
    transition: margin-left var(--transition-speed) ease, width var(--transition-speed) ease;
    margin-left: var(--sidebar-width);
    width: calc(100% - var(--sidebar-width));
    min-height: 100vh;
}

@media (min-width: 769px) {
    .main-content.expanded {
        margin-left: 80px;
        width: calc(100% - 80px);
    }
}

@media (max-width: 768px) {
    .main-content {
        margin-left: 0;
        width: 100%;
    }
}

/* --- Header --- */
.desktop-header {
    height: var(--header-height);
    position: sticky;
    top: 0;
    z-index: 40;
}

.mobile-header {
    display: none;
    height: var(--header-height);
    position: sticky;
    top: 0;
    z-index: 40;
}

@media (max-width: 768px) {
    .desktop-header {
        display: none;
    }
    .mobile-header {
        display: flex;
    }
}

/* --- Hamburger / Toggle Buttons --- */
/* 1. Desktop: Collapsed Hamburger (Inside Sidebar) */
#collapsedHamburger {
    display: none; /* Hidden by default */
    font-size: 1.25rem;
    cursor: pointer;
    margin: 0 auto; /* Center it */
}

/* Show collapsed hamburger when sidebar is collapsed */
.sidebar.collapsed #collapsedHamburger {
    display: block;
}

/* Hide internal close/arrow button when sidebar is collapsed */
.sidebar.collapsed #sidebarToggle {
    display: none;
}

/* 2. Mobile: Header Toggle Button */
/* By default, it's controlled by md:hidden in HTML. 
   We just need to hide it when sidebar is OPEN on mobile (if requested). */
body:not(.sidebar-closed) .mobile-menu-toggle {
    /* If sidebar is open, hide the header toggle? 
       User said "home burger should dissapers". 
       On mobile, if sidebar is open, the overlay covers everything, so this might be redundant,
       but let's be safe. */
    opacity: 0;
    pointer-events: none;
}


/* --- Overlay --- */
.mobile-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 1999; /* Just below sidebar */
    opacity: 0;
    transition: opacity 0.3s ease;
}

.mobile-overlay.active {
    display: block;
    opacity: 1;
}

/* --- Components --- */
.logo-container {
    background: linear-gradient(135deg, #1e40af 0%, #1e3a8a 100%);
}

.dashboard-card {
    transition: transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
}

.dashboard-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
}

.notification-dot {
    position: absolute;
    top: -5px;
    right: -5px;
    width: 12px;
    height: 12px;
    background-color: var(--color-nskred);
    border-radius: 50%;
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
}

.floating-btn {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 1000;
    transition: transform 0.3s ease;
}

.floating-btn:hover {
    transform: scale(1.1);
}

/* --- Modal --- */
.modal {
    display: none;
    position: fixed;
    z-index: 3000; /* Above sidebar */
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.5);
    backdrop-filter: blur(5px);
}

.modal.active {
    display: flex;
    align-items: center;
    justify-content: center;
    animation: fadeIn 0.3s ease;
}

.modal-content {
    background: white;
    border-radius: 12px;
    padding: 2rem;
    max-width: 90%;
    max-height: 90%;
    overflow-y: auto;
    transform: scale(0.9);
    transition: transform 0.3s ease;
}

.modal.active .modal-content {
    transform: scale(1);
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

/* --- Notifications --- */
.notification {
    position: fixed;
    top: 1rem;
    right: 1rem;
    z-index: 10000;
    padding: 0.75rem 1.5rem;
    border-radius: 0.5rem;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
    transition: opacity 0.3s ease-out, transform 0.3s ease-out;
    opacity: 0;
    transform: translateY(-20px);
}
.notification.show {
    opacity: 1;
    transform: translateY(0);
}

.notification.success {
    background-color: var(--color-nskgreen);
    color: white;
}
.notification.error {
    background-color: var(--color-nskred);
    color: white;
}
